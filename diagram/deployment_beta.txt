@startuml

cloud "Compartamos Financiera" <<extranet>> as c1
node "PC Gerencia" <<device>> as pc1
node "PC TI" <<device>> as pc2
node "PC Gestor" <<device>> as pc3

node "Servidor Principal" <<device>> {
  node "Servidor Web" <<executionEnviroment>> as ws1 {
   artifact cobinpe.exe 
  }
  node "MSSQL Server" <<executionEnviroment>> {
   component CIP_DM <<database>> as db1
   component Seguro09_02 <<database>> as db2
 }
}

node "Servidor DaaS" <<device>> as daas {
  node "Pentaho DI" <<executionEnviroment>> as pdi {
   artifact job_insert_dim_credito.kjb
   artifact job_insert_dim_gestor.kjb
   artifact job_load_fact_pagos.kjb
   artifact job_load_hist_asignacion.kjb
  }
  node "Servidor de Archivos" <<executionEnviroment>> as fs1 {
    folder data {
     file CARTERA_OPERATIVA_CASTIGO_MMMM.xlsx
     file CARTERA_CASTIGO_ASIGNACION_YYYYMM.xlsx
     file CARTERA_CASTIGO_PAGOS_YYYYMMDD.xlsx
     file CARTERA_CASTIGO_GESTORES_YYYYMM.xlsx
    }
  }
}

db1 -0)- pdi : jdbc
db2 -0)- ws1 : odbc

c1 -- pc1 : smtp

pc1 -- fs1 : sftp
pc2 -- fs1 : sftp
pc3 -- fs1 : sftp

ws1 -- pc3 : http
ws1 -- pc2 : http

pdi -(0- fs1 : tcp/ip
pc2 -- daas : tcp/ip

@enduml